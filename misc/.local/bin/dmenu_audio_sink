#!/usr/bin/sh
f() {
  local sinks=$(pacmd list-sinks | \
    grep '\(\sindex: \|device.description\)' | \
    sed 's/^\s\+\(\(* \)\?index: \|device.description = \)//g' > /tmp/pacmd-sinks && \
    paste - - -d':' < /tmp/pacmd-sinks | \
    sed 's/[0-9]\+:/& /')
  rm /tmp/pacmd-sinks
  [[ -z "$sinks" ]] && >&2 echo "No sinks found!" && exit
  echo "$sinks" | dmenu | sed 's/\(^[0-9]\+\).*/\1/' | xargs pacmd set-default-sink $@
} && f
